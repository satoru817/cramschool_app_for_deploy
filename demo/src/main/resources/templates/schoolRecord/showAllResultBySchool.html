<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <div th:replace="~{fragment::head}"></div>

  <link rel="stylesheet" th:href="@{/css/showAllResult.css}">
  <script th:src="@{/js/mockTest_modal.js}" defer></script>
</head>

<body>
<div th:replace="~{fragment::header}"></div>

<div class="main-container mt-5">
  <div class="title-section">
    <h2 class="mb-3" th:text="${schoolRecordSet.term + '年度' + schoolRecord.school.name + schoolRecordSet.semester+'学期'+schoolRecordSet.grade+'学年内申点確認画面'}"></h2>
    <span class="btn btn-outline-success mr-3">
      <a class="text-decoration-none" th:href="@{/schoolRecord/analysis/__${schoolRecordId}__}">結果分析</a>
    </span>
    <span class="btn btn-outline-info">
      <a class="text-decoration-none" th:href="@{/schoolRecordResultRegister/__${schoolRecordId}__}">編集画面に戻る</a>
    </span>
  </div>

  <div class="card">
    <div class="card-header bg-light">
      <h5 class="card-title mb-0 text-center">内申点一覧</h5>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table">
          <thead>
          <tr>
            <th>学生名</th>
            <th>クラス名
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='klass',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='klass',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              国語
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='japanese',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='japanese',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              数学
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='math',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='math',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              英語
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='english',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='english',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              理科
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='science',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='science',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              社会
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='social',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='social',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              音楽
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='music',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='music',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              美術
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='art',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='art',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              技術
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='tech',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='tech',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              体育
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='pe',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='pe',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              5科目合計
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='total5',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='total5',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              9科目合計
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='total9',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='total9',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              換算内申
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='adjustedSum',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='adjustedSum',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
            <th>
              入試点
              <div class="sort-buttons">
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='adjustedSum',order='1')}" class="sort-btn">
                  <i class="bi bi-caret-up-fill"></i>
                </a>
                <a th:href="@{/schoolRecordResult/showAll/{id}(id=${schoolRecordId}, sort='adjustedSum',order='0')}" class="sort-btn">
                  <i class="bi bi-caret-down-fill"></i>
                </a>
              </div>
            </th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="result : ${schoolRecordResults}" class="result-row">
            <td>
              <a th:href="@{/student/all_score/__${result.student.id}__}" th:text="${result.student.getName()}" class="student-name text-blue-600 hover:text-blue-800 hover:underline"></a>
            </td>
            <td class="text-nowrap">
              <span class="badge badge-info" th:text="${result.klassName}"></span>
            </td>
            <td th:text="${result.japanese}"></td>
            <td th:text="${result.math}"></td>
            <td th:text="${result.english}"></td>
            <td th:text="${result.science}"></td>
            <td th:text="${result.social}"></td>
            <td th:text="${result.music}"></td>
            <td th:text="${result.art}"></td>
            <td th:text="${result.tech}"></td>
            <td th:text="${result.pe}"></td>
            <td th:text="${result.total5}"></td>
            <td th:text="${result.total9}"></td>
            <td th:text="${result.adjustedSum}"></td>
            <td th:text="${result.getExamValue()}"></td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div th:replace="~{fragment::mockTestModal}"></div>
<div th:replace="~{fragment::footer}"></div>
<div th:replace="~{fragment::script}"></div>
</body>
</html>