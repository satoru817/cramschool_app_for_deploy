<!doctype html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <div th:replace="~{fragment::head}"></div>

    <link rel="stylesheet" th:href="@{/css/showAllResult.css}" />
    <script th:src="@{/js/regularTest_modal.js}" defer></script>
  </head>

  <body>
    <div th:replace="~{fragment::header}"></div>

    <div class="main-container mt-5">
      <div class="title-section">
        <h2>
          <span th:text="${regularTestSet.term}+'年度'"></span>
          <span th:text="${regularTest.school.name}"></span>
          <span th:text="${regularTestSet.grade}+'年生'"></span>
          <span th:text="${regularTestSet.semester}+'学期'"></span>
          <span th:if="${regularTestSet.isMid == 0}" th:text="'期末テスト'"></span>
          <span th:if="${regularTestSet.isMid == 1}" th:text="'中間テスト'"></span>結果確認画面
        </h2>
        <div class="d-flex flex-row-reverse">
          <div class="m-2">
            <a
              class="btn btn-outline-info text-decoration-none"
              th:href="@{/regularTestResultEdit/__${regularTest.regularTestId}__}"
              >編集画面に戻る</a
            >
          </div>

          <div class="m-2">
            <a
              class="btn btn-outline-primary text-decoration-none"
              th:href="@{/regularTest/analysis/__${regularTest.regularTestId}__}"
              >結果分析</a
            >
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header bg-light">
          <h5 class="card-title mb-0 text-center">定期テスト結果一覧</h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th>学生名</th>
                  <th>
                    クラス名
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='klass',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='klass',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    国語
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='japanese',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='japanese',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    数学
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='math',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='math',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    英語
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='english',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='english',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    理科
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='science',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='science',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    社会
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='social',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='social',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    音楽
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='music',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='music',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    美術
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='art',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='art',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    技術
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='tech',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='tech',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    体育
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='pe',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='pe',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    5科目
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='total5',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='total5',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                  <th>
                    9科目
                    <div class="sort-buttons">
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='total9',order='1')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-up-fill"></i>
                      </a>
                      <a
                        th:href="@{/regularTest/all_result/{id}(id=${regularTest.regularTestId}, sort='total9',order='0')}"
                        class="sort-btn"
                      >
                        <i class="bi bi-caret-down-fill"></i>
                      </a>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="result : ${regularTestResults}" class="result-row">
                  <div th:replace="~{fragment::regularTestResultRow}"></div>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div th:replace="~{fragment::footer}"></div>
    <div th:replace="~{fragment::script}"></div>
  </body>
</html>
